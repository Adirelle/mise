#!/usr/bin/env bash
set -euo pipefail
# shellcheck source-path=SCRIPTDIR
source "$(dirname "$0")/assert.sh"

echo "tiny v3.1.0" >.tool-versions

mise install tiny

eval "$(mise activate bash)" && eval "$(mise hook-env)"
assert_contains "rtx-tiny" "v3.1.0"

mise shell tiny@2.0.0 && eval "$(mise hook-env)"
assert_contains "rtx-tiny" "v2.0.0"

export MISE_TINY_VERSION=v3.1.0 && eval "$(mise hook-env)"
assert_contains "rtx-tiny" "v3.1.0"
